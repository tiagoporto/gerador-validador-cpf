language: node_js
node_js:
  - 'lts/*'

stages:
  - name: 'Deploy gh-pages'
    if: branch = main AND NOT type = pull_request

before_deploy: npm run build:site

jobs:
  include:
    - stage: 'Deploy gh-pages'
      deploy:
        provider: pages
        local_dir: website
        cleanup: false
        github_token: $GITHUB_TOKEN
        keep_history: true
        edge: true
        on:
          branch: main
